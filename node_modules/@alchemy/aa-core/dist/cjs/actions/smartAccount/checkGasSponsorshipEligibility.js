"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkGasSponsorshipEligibility = void 0;
const isSmartAccountClient_js_1 = require("../../client/isSmartAccountClient.js");
const account_js_1 = require("../../errors/account.js");
const client_js_1 = require("../../errors/client.js");
const buildUserOperation_js_1 = require("./buildUserOperation.js");
function checkGasSponsorshipEligibility(client, args) {
    const { account = client.account, overrides, context } = args;
    if (!account) {
        throw new account_js_1.AccountNotFoundError();
    }
    if (!(0, isSmartAccountClient_js_1.isBaseSmartAccountClient)(client)) {
        throw new client_js_1.IncompatibleClientError("BaseSmartAccountClient", "checkGasSponsorshipEligibility", client);
    }
    return (0, buildUserOperation_js_1.buildUserOperation)(client, {
        uo: args.uo,
        account,
        overrides,
        context,
    })
        .then((userOperationStruct) => account.getEntryPoint().version === "0.6.0"
        ? userOperationStruct
            .paymasterAndData !== "0x" &&
            userOperationStruct
                .paymasterAndData !== null
        : userOperationStruct
            .paymasterData !== "0x" &&
            userOperationStruct
                .paymasterData !== null)
        .catch(() => false);
}
exports.checkGasSponsorshipEligibility = checkGasSponsorshipEligibility;
//# sourceMappingURL=checkGasSponsorshipEligibility.js.map